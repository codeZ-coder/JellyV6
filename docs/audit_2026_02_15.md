# Auditoria do Projeto JellyV6

> **Data:** 2026-02-15
> **Escopo:** Revisao completa de codigo, arquitetura e documentacao.

## Resultado Geral

O projeto e coeso e a metafora biologica guia a arquitetura de verdade. Cada modulo tem responsabilidade clara e a nomenclatura (Rhopalium, Statocyst, Cnidocyte) funciona como documentacao viva. Os testes cobrem os modulos criticos.

---

## Bugs Encontrados e Corrigidos

### 1. Metodo Fantasma: `registrar_forense_async()` -- CORRIGIDO
O `cnidocyte.py` chamava `self.persistence.registrar_forense_async()`, mas o metodo nao existia em `persistence.py`. Toda forense do Z-Score estava sendo perdida silenciosamente.

**Correcao:** Adicionado `registrar_forense_async` em `persistence.py` que executa `registrar_forense` em thread separada (daemon).

### 2. Arquivo Duplicado: `chemoreceptor.py` -- CORRIGIDO
Existiam dois arquivos com a mesma classe `Chemoreceptor`: `chemo.py` (ativo, versao evoluida) e `chemoreceptor.py` (morto, versao antiga com thresholds diferentes).

**Correcao:** `chemoreceptor.py` deletado. `chemo.py` e a fonte unica.

---

## Problemas Estruturais Corrigidos

### 3. Orfao: `brain/cortex.py` -- CORRIGIDO
Placeholder para integracao Ollama/LLaMA3 que nao era importado por nenhum modulo.

**Correcao:** Movido para `prototypes/cortex.py`.

### 4. Docker Compose: BRAIN_URL faltando -- CORRIGIDO
O servico `body` (Streamlit) nao recebia `BRAIN_URL`, fazendo o frontend usar `localhost:8000` que nao funciona entre containers Docker.

**Correcao:** Adicionado `BRAIN_URL=http://brain:8000` no `docker-compose.yml`.

### 5. Falta de `.env.example` -- CORRIGIDO
Novos developers nao tinham referencia de quais variaveis de ambiente configurar.

**Correcao:** Criado `.env.example` com valores placeholder.

### 6. Documentacao Dispersa -- CORRIGIDO
`instrucoes.md` estava na raiz; agora consolidado em `docs/instrucoes.md`.

---

## Status Pos-Auditoria

| Item | Antes | Depois |
|---|---|---|
| Forense assincrona | Quebrada (AttributeError) | Funcional |
| Chemoreceptor duplicado | 2 arquivos | 1 arquivo (`chemo.py`) |
| `brain/cortex.py` | Orfao | Em `prototypes/` |
| Docker frontend | Quebrado (localhost) | `http://brain:8000` |
| `.env.example` | Inexistente | Criado |
| `instrucoes.md` | Na raiz | Em `docs/` |
| `jelly.db` no git | Nao tracked (ok) | Confirmado seguro |
